# 
# Device Type        : DES-3052 Fast Ethernet Switch
# MAC Address        : 00-1C-F0-15-15-B8
# IP Address         : 10.147.29.254 (Manual)
# VLAN Name          : Office
# Subnet Mask        : 255.255.255.0
# Default Gateway    : 10.147.29.1
# Boot PROM Version  : Build 1.00.B06
# Firmware Version   : Build 2.94.B08
# Hardware Version   : A1
# System Name        :
# System Location    :
# 
# System Contact     :
# Spanning Tree      : Disabled
# GVRP               : Disabled
# IGMP Snooping      : Disabled
# VLAN trunk         : Disabled
# 802.1x             : Disabled
# TELNET             : Enabled(TCP  23)
# WEB                : Enabled(TCP  80)
# RMON               : Disabled
# SSH                : Disabled
# SSL                : Disabled
# Clipaging          : Disabled
# Syslog Global State: Disabled
# Dual Image         : Supported
# Password Encryption Status : Disabled
# 
# 
# #-------------------------------------------------------------------
# #                       DES-3052 Configuration
# #
# #                       Firmware: Build 2.94.B08
# #        Copyright(C) 2008 D-Link Corporation. All rights reserved.
# #-------------------------------------------------------------------
# 
# 
# # BASIC
# 
# config serial_port baud_rate 9600 auto_logout 10_minutes
# # ACCOUNT LIST
# 
# create account admin admin
# enfortit
# enfortit
# 
# # ACCOUNT END
# 
# # PASSWORD ENCRYPTION
# disable password encryption
# config terminal_line default
# disable clipaging
# disable command logging
# enable password_recovery
# 
# # STORM
# 
# config traffic trap none
# config traffic control 1-52 broadcast disable multicast disable unicast disable action drop threshold 64 countdown 0 time_interval 5
# 
# # LOOP_DETECT
# 
# disable loopdetect
# config loopdetect recover_timer 60
# config loopdetect interval 10
# config loopdetect trap none
# config loopdetect port 1-52 state disabled
# 
# # QOS
# 
# config scheduling_mechanism strict
# config scheduling 0 weight 1
# config scheduling 1 weight 2
# config scheduling 2 weight 4
# config scheduling 3 weight 8
# config 802.1p user_priority 0 1
# config 802.1p user_priority 1 0
# config 802.1p user_priority 2 0
# config 802.1p user_priority 3 1
# config 802.1p user_priority 4 2
# config 802.1p user_priority 5 2
# config 802.1p user_priority 6 3
config cos tos value 1 class 0
config cos tos value 2 class 0
config cos tos value 3 class 0
config cos tos value 4 class 0
config cos tos value 5 class 0
config cos tos value 6 class 0
config cos tos value 7 class 0
config dscp_mapping dscp_value 0 class 0
config dscp_mapping dscp_value 1 class 0
config dscp_mapping dscp_value 2 class 0
config dscp_mapping dscp_value 3 class 0
config dscp_mapping dscp_value 4 class 0
config dscp_mapping dscp_value 5 class 0
config dscp_mapping dscp_value 6 class 0
config dscp_mapping dscp_value 7 class 0
config dscp_mapping dscp_value 8 class 0
config dscp_mapping dscp_value 9 class 0
config dscp_mapping dscp_value 10 class 0
config dscp_mapping dscp_value 11 class 0
config dscp_mapping dscp_value 12 class 0
config dscp_mapping dscp_value 13 class 0
config dscp_mapping dscp_value 14 class 0
config dscp_mapping dscp_value 15 class 0
config dscp_mapping dscp_value 16 class 0
config dscp_mapping dscp_value 17 class 0
config dscp_mapping dscp_value 18 class 0
config dscp_mapping dscp_value 19 class 0
config dscp_mapping dscp_value 20 class 0
config dscp_mapping dscp_value 21 class 0
config dscp_mapping dscp_value 22 class 0
config dscp_mapping dscp_value 23 class 0
config dscp_mapping dscp_value 24 class 0
config dscp_mapping dscp_value 25 class 0
config dscp_mapping dscp_value 26 class 0
config dscp_mapping dscp_value 27 class 0
config dscp_mapping dscp_value 28 class 0
config dscp_mapping dscp_value 29 class 0
config dscp_mapping dscp_value 30 class 0
config dscp_mapping dscp_value 31 class 0
config dscp_mapping dscp_value 32 class 0
config dscp_mapping dscp_value 33 class 0
config dscp_mapping dscp_value 34 class 0
config dscp_mapping dscp_value 35 class 0
config dscp_mapping dscp_value 36 class 0
config dscp_mapping dscp_value 37 class 0
config dscp_mapping dscp_value 38 class 0
config dscp_mapping dscp_value 39 class 0
config dscp_mapping dscp_value 40 class 0
config dscp_mapping dscp_value 41 class 0
config dscp_mapping dscp_value 42 class 0
config dscp_mapping dscp_value 43 class 0
config dscp_mapping dscp_value 44 class 0
config dscp_mapping dscp_value 45 class 0
config dscp_mapping dscp_value 46 class 0
config dscp_mapping dscp_value 47 class 0
config dscp_mapping dscp_value 48 class 0
config dscp_mapping dscp_value 49 class 0
config dscp_mapping dscp_value 50 class 0
config dscp_mapping dscp_value 51 class 0
config dscp_mapping dscp_value 52 class 0
config dscp_mapping dscp_value 53 class 0
config dscp_mapping dscp_value 54 class 0
config dscp_mapping dscp_value 55 class 0
config dscp_mapping dscp_value 56 class 0
config dscp_mapping dscp_value 57 class 0
config dscp_mapping dscp_value 58 class 0
config dscp_mapping dscp_value 59 class 0
config dscp_mapping dscp_value 60 class 0
config dscp_mapping dscp_value 61 class 0
config dscp_mapping dscp_value 62 class 0
config dscp_mapping dscp_value 63 class 0
config 802.1p default_priority 1-52 0
config cos mapping port 1-52  ethernet 802.1p

# MIRROR

disable mirror
config mirror port 1 delete source ports 1 both

# BANDWIDTH

config bandwidth_control 1-52 rx_rate no_limit tx_rate no_limit

# SYSLOG

disable syslog
config log_save_timing on_demand

# TRAF-SEGMENTATION

config traffic_segmentation 1-52 forward_list 1-52

# PACKET_FROM_CPU

config mgmt_pkt_priority default

# SSL

disable ssl
enable ssl ciphersuite RSA_with_RC4_128_MD5
enable ssl ciphersuite RSA_with_3DES_EDE_CBC_SHA
enable ssl ciphersuite DHE_DSS_with_3DES_EDE_CBC_SHA
enable ssl ciphersuite RSA_EXPORT_with_RC4_40_MD5
config ssl cachetimeout 600

# PORT

config ports 1 speed auto flow_control disable state enable description "uplink"
config ports 1-52 learning enable
config ports 1-52 mdix auto
config ports 2-6 speed auto flow_control disable state enable description "phone"
config ports 7 speed auto flow_control disable state enable description "wifi ap"
config ports 8-45,48,52 speed auto flow_control disable state enable clear_description
config ports 46 speed auto flow_control disable state enable description "master.cs_eth0"
config ports 47 speed auto flow_control disable state enable description "Megafon.vlan1030.30M"
config ports 49-50 medium_type fiber speed auto flow_control disable state enable clear_description
config ports 49-50 medium_type fiber learning enable
config ports 49 speed auto flow_control disable state enable description "cpe.sec2.cs-001.arh"
config ports 50 speed auto flow_control disable state enable description "slave.cs_eth0"
config ports 51 speed auto flow_control disable state enable description "slave.cs_eth1"

# OAM


# DDM

config ddm trap disable
config ddm log enable
config ddm ports 49-50 state enable shutdown none

# TIME_RANGE


# GM

config sim candidate
disable sim
config sim dp_interval 30
config sim hold_time 100

# MANAGEMENT

enable snmp traps
enable snmp authenticate traps
enable snmp linkchange_traps
config snmp linkchange_traps ports all enable
config snmp coldstart_traps enable
config snmp warmstart_traps enable
disable rmon

# SNMPv3

delete snmp community public
delete snmp community private
delete snmp user initial
delete snmp group initial
delete snmp view restricted all
delete snmp view CommunityView all
delete snmp group public
delete snmp group private
delete snmp group ReadGroup
delete snmp group WriteGroup
config snmp engineID 800000ab03001cf01515b8
create snmp view restricted 1.3.6.1.2.1.1 view_type included
create snmp view restricted 1.3.6.1.2.1.11 view_type included
create snmp view restricted 1.3.6.1.6.3.10.2.1 view_type included
create snmp view restricted 1.3.6.1.6.3.11.2.1 view_type included
create snmp view restricted 1.3.6.1.6.3.15.1.1 view_type included
create snmp view CommunityView 1 view_type included
create snmp view CommunityView 1.3.6.1.6.3 view_type excluded
create snmp view CommunityView 1.3.6.1.6.3.1 view_type included
create snmp group public v1 read_view CommunityView notify_view CommunityView
create snmp group public v2c read_view CommunityView notify_view CommunityView
create snmp group initial v3  noauth_nopriv read_view restricted notify_view restricted
create snmp group private v1 read_view CommunityView write_view CommunityView notify_view CommunityView
create snmp group private v2c read_view CommunityView write_view CommunityView notify_view CommunityView
create snmp group enfortit v1 read_view CommunityView write_view CommunityView notify_view CommunityView
create snmp group enfortit v2c read_view CommunityView write_view CommunityView notify_view CommunityView
create snmp group engforta v1 read_view CommunityView notify_view CommunityView
create snmp group engforta v2c read_view CommunityView notify_view CommunityView
create snmp group ReadGroup v1 read_view CommunityView notify_view CommunityView
create snmp group ReadGroup v2c read_view CommunityView notify_view CommunityView
create snmp group WriteGroup v1 read_view CommunityView write_view CommunityView notify_view CommunityView
create snmp group WriteGroup v2c read_view CommunityView write_view CommunityView notify_view CommunityView
create snmp community enfortit view CommunityView read_write
create snmp community engforta view CommunityView read_only
create snmp user initial initial

# DEBUG_HANDLER

debug config error_reboot enable

# VLAN

disable asymmetric_vlan
disable qinq
config vlan default delete 1-16,26,28,44-52
config vlan default add forbidden 48
config vlan default advertisement enable
create vlan Office tag 99
config vlan Office add tagged 2,4-5,47
config vlan Office add untagged 1,3,6-16,45,52
create vlan mgmt tag 100
config vlan mgmt add tagged 12,47
config vlan mgmt add untagged 46
create vlan VoIP tag 103
config vlan VoIP add tagged 46-47
create vlan VoIP1 tag 104 advertisement
config vlan VoIP1 add tagged 45-47,49-51
create vlan VoIP2 tag 141
config vlan VoIP2 add tagged 46-47,49-51
create vlan Sevnauchflot tag 275
config vlan Sevnauchflot add tagged 47
config vlan Sevnauchflot add untagged 48
create vlan alternativa tag 403
config vlan alternativa add tagged 47
config vlan alternativa add untagged 26
create vlan VLAN406 tag 406
config vlan VLAN406 add tagged 47
config vlan VLAN406 add untagged 44
create vlan Alternativa.F.Abra.7.3 tag 812
config vlan Alternativa.F.Abra.7.3 add tagged 47
config vlan Alternativa.F.Abra.7.3 add untagged 28
create vlan VLAN3016 tag 3016
config vlan VLAN3016 add tagged 9,49
config vlan VLAN3016 add untagged 2,4-5
create vlan VLAN3017 tag 3017
config vlan VLAN3017 add tagged 9,49
disable gvrp
config gvrp 1,3,6-16,45,52 state disable ingress_checking enable acceptable_frame admit_all pvid 99
config gvrp 2,4-5 state disable ingress_checking enable acceptable_frame admit_all pvid 3016
config gvrp 17-25,27,29-43,47,49-51 state disable ingress_checking enable acceptable_frame admit_all pvid 1
config gvrp 26 state disable ingress_checking enable acceptable_frame admit_all pvid 403
config gvrp 28 state disable ingress_checking enable acceptable_frame admit_all pvid 812
config gvrp 44 state disable ingress_checking enable acceptable_frame admit_all pvid 406
config gvrp 46 state disable ingress_checking enable acceptable_frame admit_all pvid 100
config gvrp 48 state disable ingress_checking enable acceptable_frame admit_all pvid 275

# 8021X

disable 802.1x
config 802.1x auth_protocol radius_eap
config radius parameter timeout 5 retransmit 2
config 802.1x capability ports 1-52 none
config 802.1x auth_parameter ports 1-52 direction both port_control auto quiet_period 60 tx_period 30 supp_timeout 30 server_timeout 30 max_req 2 reauth_period 3600 enable_reauth disable

# PORT_LOCK

disable port_security trap_log
config port_security ports 1-52 admin_state disable max_learning_addr 1 lock_address_mode DeleteOnTimeout

# PPPOE

config pppoe circuit_id_insertion state disable
config pppoe circuit_id_insertion ports 1-52 state enable circuit_id ip

# DhcpSS

config filter dhcp_server ports 1-52 state disable
config filter dhcp_server trap_log disable
config filter dhcp_server illegal_server_log_suppress_duration 5min

# MAC_ADDRESS_TABLE_NOTIFICATION

config mac_notification interval 1 historysize 1
disable mac_notification
config mac_notification ports 1-52 disable

# STP

disable stp
config stp version rstp
config stp maxage 20 maxhops 20 forwarddelay 15 txholdcount 3 fbpdu enable hellotime 2 lbd enable lbd_recover_timer 60
config stp priority 32768 instance_id 0
config stp mst_config_id name 00:1C:F0:15:15:B8 revision_level 0
config stp trap new_root enable topo_change enable
config stp ports 1-52 externalCost auto edge false p2p auto state enable lbd disable
config stp mst_ports 1-52 instance_id 0 internalCost auto priority 128
config stp ports 1-52 fbpdu enable
config stp ports 1-52 restricted_role false
config stp ports 1-52 restricted_tcn false

# MULTI FILTER

config control_pkt ipv4 igmp replace priority none dscp none
config control_pkt ipv4 vrrp replace priority none dscp none
config control_pkt ipv4 rip replace priority none dscp none
config control_pkt ipv4 pim replace priority none dscp none
config control_pkt ipv4 dvmrp replace priority none dscp none
config control_pkt ipv4 ospf replace priority none dscp none
config control_pkt ipv6 mld replace priority none dscp none
config control_pkt ipv6 nd replace priority none dscp none
config max_mcast_group port 1-52 max_group 256

# BPDU_PROTECTION

config bpdu_protection ports 1-52 mode shutdown

# SAFEGUARD_ENGINE

config safeguard_engine state enable utilization rising 30 falling 20 trap_log disable mode fuzzy

# BANNER_PROMP

config command_prompt default
config greeting_message default

# SSH

config ssh algorithm 3DES enable
config ssh algorithm AES128 enable
config ssh algorithm AES192 enable
config ssh algorithm AES256 enable
config ssh algorithm arcfour enable
config ssh algorithm blowfish enable
config ssh algorithm cast128 enable
config ssh algorithm twofish128 enable
config ssh algorithm twofish192 enable
config ssh algorithm twofish256 enable
config ssh algorithm MD5 enable
config ssh algorithm SHA1 enable
config ssh algorithm RSA enable
config ssh algorithm DSA enable
config ssh authmode password enable
config ssh authmode publickey enable
config ssh authmode hostbased enable
config ssh server maxsession 8
config ssh server contimeout 120
config ssh server authfail 2
config ssh server rekey never
config ssh user admin authmode password
disable ssh

# SNOOP

disable igmp_snooping
config igmp_snooping data_driven_learning max_learned_entry 56
disable igmp_snooping multicast_vlan
config igmp_snooping vlan_name default host_timeout 260 router_timeout 260 leave_timer 2 state disable fast_leave disable
config igmp_snooping data_driven_learning vlan_name default aged_out disable
config igmp_snooping data_driven_learning vlan_name default state enable
config igmp_snooping querier all query_interval 125 max_response_time 10 robustness_variable 2 last_member_query_interval 1 state disable
config igmp_snooping vlan_name Office host_timeout 260 router_timeout 260 leave_timer 2 state disable fast_leave disable
config igmp_snooping data_driven_learning vlan_name Office aged_out disable
config igmp_snooping data_driven_learning vlan_name Office state enable
config igmp_snooping vlan_name mgmt host_timeout 260 router_timeout 260 leave_timer 2 state disable fast_leave disable
config igmp_snooping data_driven_learning vlan_name mgmt aged_out disable
config igmp_snooping data_driven_learning vlan_name mgmt state enable
config igmp_snooping vlan_name VoIP host_timeout 260 router_timeout 260 leave_timer 2 state disable fast_leave disable
config igmp_snooping data_driven_learning vlan_name VoIP aged_out disable
config igmp_snooping data_driven_learning vlan_name VoIP state enable
config igmp_snooping vlan_name VoIP1 host_timeout 260 router_timeout 260 leave_timer 2 state disable fast_leave disable
config igmp_snooping data_driven_learning vlan_name VoIP1 aged_out disable
config igmp_snooping data_driven_learning vlan_name VoIP1 state enable
config igmp_snooping vlan_name VoIP2 host_timeout 260 router_timeout 260 leave_timer 2 state disable fast_leave disable
config igmp_snooping data_driven_learning vlan_name VoIP2 aged_out disable
config igmp_snooping data_driven_learning vlan_name VoIP2 state enable
config igmp_snooping vlan_name Sevnauchflot host_timeout 260 router_timeout 260 leave_timer 2 state disable fast_leave disable
config igmp_snooping data_driven_learning vlan_name Sevnauchflot aged_out disable
config igmp_snooping data_driven_learning vlan_name Sevnauchflot state enable
config igmp_snooping vlan_name alternativa host_timeout 260 router_timeout 260 leave_timer 2 state disable fast_leave disable
config igmp_snooping data_driven_learning vlan_name alternativa aged_out disable
config igmp_snooping data_driven_learning vlan_name alternativa state enable
config igmp_snooping vlan_name VLAN406 host_timeout 260 router_timeout 260 leave_timer 2 state disable fast_leave disable
config igmp_snooping data_driven_learning vlan_name VLAN406 aged_out disable
config igmp_snooping data_driven_learning vlan_name VLAN406 state enable
config igmp_snooping vlan_name Alternativa.F.Abra.7.3 host_timeout 260 router_timeout 260 leave_timer 2 state disable fast_leave disable
config igmp_snooping data_driven_learning vlan_name Alternativa.F.Abra.7.3 aged_out disable
config igmp_snooping data_driven_learning vlan_name Alternativa.F.Abra.7.3 state enable
config igmp_snooping vlan_name VLAN3016 host_timeout 260 router_timeout 260 leave_timer 2 state disable fast_leave disable
config igmp_snooping data_driven_learning vlan_name VLAN3016 aged_out disable
config igmp_snooping data_driven_learning vlan_name VLAN3016 state enable
config igmp_snooping vlan_name VLAN3017 host_timeout 260 router_timeout 260 leave_timer 2 state disable fast_leave disable
config igmp_snooping data_driven_learning vlan_name VLAN3017 aged_out disable
config igmp_snooping data_driven_learning vlan_name VLAN3017 state enable
config igmp access_authentication port 1-52 state disable
config cpu_filter l3_control_pkt 1-52 all state disable

# FDB

config fdb aging_time 300
config multicast port_filtering_mode 1-52 forward_unregistered_groups
disable flood_fdb
config flood_fdb log disable trap disable

# VLAN_TRUNK

disable vlan_trunk

# SMTP

disable smtp

# ACL

disable cpu_interface_filtering

# SNTP

enable sntp
config time_zone operator + hour 4 min 0
config sntp primary 10.77.0.141 secondary 192.168.66.66 poll-interval 720
config dst disable

# DOS_PREVENTION

disable dos_prevention trap_log
config dos_prevention dos_type land_attack action drop state enable
config dos_prevention dos_type blat_attack action drop state enable
config dos_prevention dos_type smurf_attack action drop state enable
config dos_prevention dos_type tcp_null_scan action drop state enable
config dos_prevention dos_type tcp_xmascan action drop state enable
config dos_prevention dos_type tcp_synfin action drop state enable
config dos_prevention dos_type tcp_syn_srcport_less_1024 action drop state disable

# LACP

config lacp_port 1-52 mode passive
config link_aggregation algorithm mac_source

# ERPS

config erps log disable
disable erps

# ADDRBIND

disable address_binding dhcp_snoop
disable address_binding trap_log
config address_binding ip_mac ports 1-52 state disable allow_zeroip disable forward_dhcppkt enable
config address_binding ip_mac ports 1-52 mode arp stop_learning_threshold 500
config address_binding dhcp_snoop max_entry ports 1-52 limit 5

# ARPSPOOF


# IP

config ipif System vlan Office ipaddress 10.147.29.254/24 state enable
config ipif System dhcp_option12 state disable
enable telnet 23
enable web 80
disable autoconfig

# LLDP

disable lldp
config lldp message_tx_interval 30
config lldp tx_delay 2
config lldp message_tx_hold_multiplier 4
config lldp reinit_delay 2
config lldp notification_interval 5
config lldp ports 1-52 notification disable
config lldp ports 1-52 admin_status tx_and_rx

# MLDSNP

disable mld_snooping

# ARP

config arp_aging time 20
config gratuitous_arp send ipif_status_up enable
config gratuitous_arp send dup_ip_detected enable
config gratuitous_arp learning enable

# AAA

config authen_login default method local
config authen_enable default method  local_enable
config authen application console login default
config authen application console enable default
config authen application telnet login default
config authen application telnet enable default
config authen application ssh login default
config authen application ssh enable default
config authen application http login default
config authen application http enable default
config authen parameter response_timeout 30
config authen parameter attempt 3
disable authen_policy
config admin local_enable




# DHCP_RELAY

disable dhcp_relay
config dhcp_relay hops 4 time 0
config dhcp_relay option_82 state disable
config dhcp_relay option_82 check disable
config dhcp_relay option_82 policy replace
config dhcp_relay option_82 remote_id default
config dhcp_relay ports 1-52 state enable

# DHCP_LOCAL_RELAY

disable dhcp_local_relay
config dhcp_local_relay option_82 remote_id default
config dhcp_local_relay option_82 ports 1-52 policy keep

# FIRM

config configuration trap save disable upload disable download disable

# ROUTE

create iproute default 10.147.29.1 1

#-------------------------------------------------------------------
#             End of configuration file for DES-3052
#------------------------------------------------------------------


DES-3052:5#show account
Command: show account

Current Accounts:
Username            Access Level
------------------  ------------
admin               Admin

Total Entries : 1

